$(function(){function i(){var i=[],a=$(".box").outerWidth(),s=Math.floor($(window).outerWidth()/a);$("#main").width(s*a),$(".box").each(function(n,o){if(n<s)i.push($(this).outerHeight());else{var e=Math.min.apply(null,i),p=i.indexOf(e);$(this).css({position:"absolute",left:p*a,top:e}),i[p]+=$(this).outerHeight()}})}i();var a={src:[{name:"pics/a1(5).jpg"},{name:"pics/a1(1).jpg"},{name:"pics/a1(2).jpg"},{name:"pics/a1(5).jpg"},{name:"pics/a1(8).jpg"},{name:"pics/a1(7).jpg"},{name:"pics/a1(9).jpg"},{name:"pics/a1(10).jpg"},{name:"pics/a1(12).jpg"},{name:"pics/a1(6).jpg"},{name:"pics/a1(3).jpg"},{name:"pics/a1(17).jpg"}]};$(window).on("scroll",function(){var s=$(this).scrollTop(),n=$(this).height(),o=$(".box").last().offset().top+$(".box:last").innerHeight()/2;console.log(o),o<s+n&&($.each(a.src,function(i,a){console.log(a),$("<div class=box><div class=nav><div class=pic><img src="+a.name+"></div></div></div>").appendTo("#main")}),i())})}),console.log(4545455);